
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing &mdash; clik v1.5 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="clik v1.5 documentation" href="index.html" />
    <link rel="next" title="Interfacing the library with a c executable" href="interfacingc.html" />
    <link rel="prev" title="Design choices" href="designchoices.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="interfacingc.html" title="Interfacing the library with a c executable"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="designchoices.html" title="Design choices"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">clik v1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installing">
<h1>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h1>
<p>The library has a lot of external dependencies.</p>
<p>You will need <a class="reference external" href="http://python.org">python</a> (version&gt;2.5, with library and header files) a c compiler (gcc or icc), a fortran compiler (gfortran or ifort), <a class="reference external" href="http://www.gnu.org/software/gsl/">gsl</a> (version&gt;1.10), <a class="reference external" href="http://www.hdfgroup.org/HDF5">hdf5</a> (version&gt;1.8), <a class="reference external" href="http://healpix.jpl.nasa.gov/">healpix c and f90</a> (version&gt;2.20), a blas and lapack distribution (preferably intel MKL), the <a class="reference external" href="http://alfven.org/wp/hdf5-for-python/">h5py</a> python package (version&gt;1.3), the <a class="reference external" href="http://numpy.scipy.org/">numpy</a> python package (version&gt;1.1), the <a class="reference external" href="http://cython.org/">cython</a> python package (version&gt;1.12). Optionnaly, it can use pmclib (version&gt;1.5) if you have it on your system, and retrieve the location of most of those external library from it (as pmclib as mostly the same requirements).</p>
<p>If some of those dependencies are unavaliable, clik will lack a few facilities.
If the fortran compiler is absent, neither the BOPIX likelihood nor the clik fortran wrapper and example code will be compiled.
If the library and headr of the python package or any of the required modules are absent, neither the clik python wrapper, nor the likelihood file manipulation utilities will be compiled.</p>
<p>Finally, the clik installer can also (try to) install for you some of the dependencies, namelly, gsl, hdf5, blas/lapack, healpix, h5py, numpy and cython. In this case, no particular system specific optimization will be attempted. This is mainly a problem for the blas/lapack library that will be much less efficient than (for example) the intel MKL library, and will not take advantage of multicore cpus.</p>
<div class="section" id="install-tool">
<h2>Install tool<a class="headerlink" href="#install-tool" title="Permalink to this headline">¶</a></h2>
<p>The library and executables must be installed with the &#8216;waf&#8217; tool. It is distributed in the package. Please have a look at <a class="reference external" href="http://waf.googlecode.com">the waf webpage</a>.</p>
<p>The installer must first be configured using:</p>
<div class="highlight-python"><pre>$&gt; ./waf configure</pre>
</div>
<p>then the codes can be compiled and installed with:</p>
<div class="highlight-python"><pre>$&gt; ./waf install</pre>
</div>
<p>The command line options given during the <cite>configure</cite> step allow to pass to the installer the locations of the different dependencies. For a complete list of options, do:</p>
<div class="highlight-python"><pre>$&gt; ./waf configure</pre>
</div>
<p>Only the most important one will be described here.</p>
<div class="section" id="setting-the-architecture">
<h3>Setting the architecture<a class="headerlink" href="#setting-the-architecture" title="Permalink to this headline">¶</a></h3>
<p>The architecture (32 or 64bits) can be set using the <tt class="docutils literal"><span class="pre">--m32</span></tt> or <tt class="docutils literal"><span class="pre">--m64</span></tt> flags. 64bits is the default.</p>
</div>
<div class="section" id="setting-installation-path">
<h3>Setting installation path<a class="headerlink" href="#setting-installation-path" title="Permalink to this headline">¶</a></h3>
<p>The installation path can be set using the <tt class="docutils literal"><span class="pre">--prefix=SOMEPATH</span></tt> option. To isntall in the current directory, one can use the <tt class="docutils literal"><span class="pre">--local</span></tt> option which is equivallent to <tt class="docutils literal"><span class="pre">--prefix=`pwd`</span></tt></p>
</div>
<div class="section" id="setting-the-location-of-a-library">
<h3>Setting the location of a library<a class="headerlink" href="#setting-the-location-of-a-library" title="Permalink to this headline">¶</a></h3>
<p>The location of the library dependencies (gsl, hdf5, healpix, blas/lapack) must be known to the installer. By default, it will look for them in the classical system
locations:  <tt class="docutils literal"><span class="pre">/usr/lib</span></tt>, <tt class="docutils literal"><span class="pre">/usr/lib64</span></tt>, <tt class="docutils literal"><span class="pre">/usr/local/lib</span></tt>, <tt class="docutils literal"><span class="pre">/usr/local/lib64</span></tt> for the library, <tt class="docutils literal"><span class="pre">/usr/include</span></tt> and <tt class="docutils literal"><span class="pre">/usr/local/include</span></tt> for the include files. One can
change the lookup path on a library by library basis. If a given dependency, <tt class="docutils literal"><span class="pre">XXX</span></tt>, is installed on the system such that its lib are in <tt class="docutils literal"><span class="pre">SOMEPREFIXPATH/lib</span></tt> and its
include files in <tt class="docutils literal"><span class="pre">SOMEPREFIXPATH/include</span></tt>, setting the command line option <tt class="docutils literal"><span class="pre">--XXX_prefix=SOMEPREFIXPATH</span></tt>  will allow the clik install system. If <tt class="docutils literal"><span class="pre">SOMEPREFIXPATH</span></tt> is identical to the the install path of clik, this option can be replaced by <tt class="docutils literal"><span class="pre">-XXX_islocal</span></tt>.</p>
<p>If the library are at
<tt class="docutils literal"><span class="pre">SOMEWEIRDPATH</span></tt> and the includes at <tt class="docutils literal"><span class="pre">SOMEDIFFERENTPATH</span></tt>, then setting the two options  <tt class="docutils literal"><span class="pre">--XXX_lib=SOMEWEIRDPATH</span> <span class="pre">--XXX_include=SOMEDIFFERENTPATH</span></tt> will allow the clik
install system to find them.</p>
<p>Finally, if the name of the library files differs from the usual ones one can set the option <tt class="docutils literal"><span class="pre">--XXX_link=THELINKLINE</span></tt>.</p>
</div>
<div class="section" id="special-case-the-mkl-library">
<h3>Special case: the mkl library<a class="headerlink" href="#special-case-the-mkl-library" title="Permalink to this headline">¶</a></h3>
<p>An extra special option is present for the blas/lapack dependency when one want to compile against the intel MKL library. Setting the option <tt class="docutils literal"><span class="pre">--lapack_mkl=PATH_OF_THE_MKL_INSTALL</span></tt> will allow clik to pick the correct set of libraries for the particular version of the mkl package (version 10.1, 10.2 and 10.3 tested).</p>
</div>
<div class="section" id="special-case-wmap-likelihood">
<h3>Special case: WMAP likelihood<a class="headerlink" href="#special-case-wmap-likelihood" title="Permalink to this headline">¶</a></h3>
<p>Clik can provide a wrapper to the wmap7 likelihood. It need to now where the sources of the likelihood are located to compile against them. One must set the option <tt class="docutils literal"><span class="pre">--wmap_src=WMAP7SRCPATH</span></tt> or let the install system download it for you by setting the option <tt class="docutils literal"><span class="pre">--wmap_install</span></tt>. Note that to actually use this likelihood, one must also download the data files and prepare clik likelihood files from them. Look at <a class="reference internal" href="usingwmap.html#wmap"><em>Using WMAP7 likelihood</em></a>.</p>
</div>
<div class="section" id="telling-clik-to-install-the-dependencies">
<h3>Telling clik to install the dependencies<a class="headerlink" href="#telling-clik-to-install-the-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Setting the option <tt class="docutils literal"><span class="pre">--XXX_install</span></tt> will tell the clik install system to attempt at installing the dependency. It will first download it from the net, and then try to compile and install it. Installation will be perfomed at the same location as where clik itself will install. The download and install will only be done if needed.
This is only possible for the following dependencies : gsl, hdf5, healpix, blas/lapack, numpy, cython, h5py.</p>
</div>
<div class="section" id="putting-it-all-together">
<h3>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h3>
<p>The following command:</p>
<div class="highlight-python"><pre>$&gt; ./waf configure --local --gsl_install --hdf5_install --lapack_install --healpix_install --h5py_install --cython_install --numpy_install</pre>
</div>
<p>will tell the clik install system to install all the possible external dependency in the current directory. All will be compiled in 64bit mode. Clik will be compiled in 64bit as well and installed in the same directory.</p>
<p>The following command:</p>
<div class="highlight-python"><pre>$&gt; ./waf configure --local --lapack_mkl=/opt/intel/mkl --healpix_install --hdf5_install --h5py_install</pre>
</div>
<p>will tell the clik install system to install healpix, hdf5 and h5py. All the other dependency will be looked up in the classical locations. The blas/lapack library
will be the one from an mkl install located at &#8211;lapack_mkl=/opt/intel/mkl. Clik will be compiled in 64bit and installed in the current directory.</p>
</div>
<div class="section" id="best-choice">
<h3>Best choice<a class="headerlink" href="#best-choice" title="Permalink to this headline">¶</a></h3>
<p>If you are not in a hurry, here is the recommanded configure line command:</p>
<div class="highlight-python"><pre>$&gt; ./waf configure --local --m64 --lapack_mkl=/opt/intel/mkl --healpix_install --hdf5_install --h5py_install --cython_install --numpy_install --wmap_install</pre>
</div>
</div>
</div>
<div class="section" id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>Depending of your shell, a configuration file named <tt class="docutils literal"><span class="pre">clik_profile.sh</span></tt> of <tt class="docutils literal"><span class="pre">clik_profile.csh</span></tt> will be installed in the <tt class="docutils literal"><span class="pre">bin</span></tt> directory at the install location of clik. One can source it on the command line, or include it in its startup configuration file to set the environment variable needed by clik.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installing</a><ul>
<li><a class="reference internal" href="#install-tool">Install tool</a><ul>
<li><a class="reference internal" href="#setting-the-architecture">Setting the architecture</a></li>
<li><a class="reference internal" href="#setting-installation-path">Setting installation path</a></li>
<li><a class="reference internal" href="#setting-the-location-of-a-library">Setting the location of a library</a></li>
<li><a class="reference internal" href="#special-case-the-mkl-library">Special case: the mkl library</a></li>
<li><a class="reference internal" href="#special-case-wmap-likelihood">Special case: WMAP likelihood</a></li>
<li><a class="reference internal" href="#telling-clik-to-install-the-dependencies">Telling clik to install the dependencies</a></li>
<li><a class="reference internal" href="#putting-it-all-together">Putting it all together</a></li>
<li><a class="reference internal" href="#best-choice">Best choice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="designchoices.html"
                        title="previous chapter">Design choices</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interfacingc.html"
                        title="next chapter">Interfacing the library with a c executable</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="interfacingc.html" title="Interfacing the library with a c executable"
             >next</a> |</li>
        <li class="right" >
          <a href="designchoices.html" title="Design choices"
             >previous</a> |</li>
        <li><a href="index.html">clik v1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, K. Benabed, S. Prunet, E. Hivon, J.F. Cardoso.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
  </body>
</html>